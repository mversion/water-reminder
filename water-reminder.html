<!doctype html>
<html>

<head>
    <meta charset="utf-8">
    <title>Time to Aqua Up!</title>
    <link rel="shortcut icon" type="image/png" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAMAAAD04JH5AAAAA3NCSVQICAjb4U/gAAAACXBIWXMAAARSAAAEUgHQ6AxBAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAd1QTFRF////AP//////Var/qv//bbbbttv/gL/fn9//d7vuqt3ucbjxqtXxc7/ms9nye7ntsNP2d7vuqtX3ebzrrtfyebbtsNXzeLjsrdb0d7nqr9X1eLrqrtXzd7jqr9XzeLnqrdbzeLrrr9T0SnKRUXaRebjqrtXyRmyKSm6MeLrrrdbyeLnrr9XzRWeEeLjrrtXzeLjsr9Xzd7nqrdXzebnqrtXzd7rqr9b0Woqwcpazd7nqr9bzRGiDeLnrrdXzeLrqrtb0d7nrrtXyeLjsrtXzd7nrrdX0eLnsrtX0eLnrrtXzebrrrtXzeLnrrtXzeLnqrtbzY4mmd7jrrtXzucfRVYOmZ4ypr77Kzdfez9ng0drh3+XqeLnsmKu6mq28rdbz6Ozwo9Dyebnrr9by7PDyhJuu7/L1fZapeLnrrtbzeJKmeZKm9fb4b4qgR2yJRmyJSG2JbIieZoOad7nrpNDyrdX0+vv8Xn2VeLnrrtXzXX2VeLnrrtXz/P39eLnrrtXz/P39eLnrrtXzWHiReLnrrtXzRWmFeLnrrtXzU3SOebnrrtXzUnON/v7+T3GLeLnrrtXzTG6J////eLnrrtXz////SGuGRmqF////////////RGiEeLnrrtXz////YeuWtAAAAJt0Uk5TAAEBAwMHBwgIDw8SEhQUHR0eHiYmKipERElJVVVWVldXWVlhYWFhZGRkZGZmaGhobGxtbW5ub29wcHx8gICAiIiLi5CQnJydnaSkqamwsLm5vLy8v8DAwMDAwMTFxcXFyMnLy8vMztDR0dLS1NfY2dnZ3d7e3t7j4+Pk5OTk5eXl5ubo6Ojq6urt7e3u7vLy8vX2+Pj5+vz8/f5agSrgAAACjElEQVR42u3Y51MTURQF8GdBsPfeKzbsHey9i6I0QVSKUlRQAVECigooJAGlBHbf32qIKe++fSvZmX33zcg93+6XnN+cmcxuwpj35I27JI/hhAAEIAABCGAccPJRKvkPhZxAApyxU3lnCTk9VQDn3ABncfqzvrgBPmeiAI7bbgDrGPoAEgBlAjCABMCYAA4gAxAmOGr/C2AdQR7AAdA+gTSAA6B7gqyOyQCBTNQBnAC9EzgGUAC0TnDYnhxgHcIcQAXQOIFzABVA3wSzOtIDBDLwBlACdE2gGkAN0DTBQTtdgHVAywCf0gd8zMAawAWgYwL1AG4ADRNssb0ArM2+A/Z7A+wjAAEIQAACEIAABPj/ANveKPPqtTpbfQfkjHtKDgEIQIApA+jtNQsYqa4eMQoo4rzIJKCcR1NuDtAwOAEYbDAF6GvnsbT3GQIU83iKzQBahhKAoRYjgFKeTKkJQGMkBYg0GgBUciGV+IAmDtKEDiiAgAJ0QD0E1GMDhiMQEBlGBrRxKW3IgDoZUIcMqJEBNciA4BjsHwtifwuaIaAZ/WtYAgEl6IBgp9jfGcR/FlSJgCoTj+Oy/kR9f5mZN6KuitGJ+tGKLmNvxQO1hYW1A/TbkAAEIAAOYOd3T8n2HUD/lhOAAAQgAAEIQAACEGCT1PweAt5KgI2+A5bB/p8XIOD8DwhY6jtgehgAHqyDgLX3QX9omu8AdgUAds/rEQHdc3cBwGX/+9mcD0L/PcY2iID1jN0V+ltnawCwVb+T/d8WRe8bKcD16Lnwa7L/10qmJSuex/tvLYjde8N/AaE9sXP+zXj/s+VMU2buuPYy/OTSmsS9JPfO08DtU4sT9+qLj0Mvrm6f4eUz/wCGT3FfBLvouwAAAABJRU5ErkJggg==" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            // Change the background based on hour of the day 
            var d = new Date();
            var n = d.getHours();
            if (n > 14 || n < 18)
                document.getElementById("bg").className = "afternoon";
            else if (n > 11 && n < 14)
                document.getElementById("bg").className = "midday";
            else
                document.getElementById("bg").className = "morning";
        });
    </script>
    <style type="text/css">
        .animated {
            -webkit-animation-duration: 1s;
            animation-duration: 1s;
            -webkit-animation-fill-mode: both;
            animation-fill-mode: both;
        }
        
        .animated.infinite {
            -webkit-animation-iteration-count: infinite;
            animation-iteration-count: infinite;
        }
        
        .animated.hinge {
            -webkit-animation-duration: 2s;
            animation-duration: 2s;
        }
        
        .animated.flipOutX,
        .animated.flipOutY,
        .animated.bounceIn,
        .animated.bounceOut {
            -webkit-animation-duration: .75s;
            animation-duration: .75s;
        }

        /* originally authored by Nick Pettit - https://github.com/nickpettit/glide */
        
        @-webkit-keyframes pulse {
            from {
                -webkit-transform: scale3d(1, 1, 1);
                transform: scale3d(1, 1, 1);
            }
            50% {
                -webkit-transform: scale3d(1.05, 1.05, 1.05);
                transform: scale3d(1.05, 1.05, 1.05);
            }
            to {
                -webkit-transform: scale3d(1, 1, 1);
                transform: scale3d(1, 1, 1);
            }
        }
        
        @keyframes pulse {
            from {
                -webkit-transform: scale3d(1, 1, 1);
                transform: scale3d(1, 1, 1);
            }
            50% {
                -webkit-transform: scale3d(1.05, 1.05, 1.05);
                transform: scale3d(1.05, 1.05, 1.05);
            }
            to {
                -webkit-transform: scale3d(1, 1, 1);
                transform: scale3d(1, 1, 1);
            }
        }
        
        .pulse {
            -webkit-animation-name: pulse;
            animation-name: pulse;
        }
        
        body {
            font: normal 67pt Raleway, Times, sans-serif;
            color: #dedede;
            overflow: hidden;
            margin: 0;
            background-color: #2F1107;
        }
        
        div#bg {
            width: 100%;
            height: 80vh;
        }
        
        div.afternoon {
            background: linear-gradient(to bottom, #163C52 0%, #4F4F47 30%, #C5752D 60%, #B7490F 80%, #2F1107 100%) !important;
        }
        div.midday {
            background: linear-gradient(to bottom, #1e528e 0%, #265889 50%, #9da671 100%) !important;
        }
        div.morning {
            background: linear-gradient(to bottom, #4a4969 0%, #7072ab 50%, #cd82a0 100%) !important;
        }
        
        @import "compass/css3";
        canvas {
            position: absolute;
            bottom: 0;
        }
        
        .msg {
            position: absolute;
            bottom: 250px;
            z-index: 0;
            font-size: 12pt;
            text-align: center;
            width: 100%;
        }
    </style>
</head>

<body>
    <div id="bg"></div>
    <div class="msg animated infinite pulse">It's time to water up, punk.</div>
    <script type="text/javascript">
        setTimeout('window.close()', 10800000); //close windows after x amount of time!
        var _requestAnimationFrame = window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.msRequestAnimationFrame || window.oRequestAnimationFrame || function (callback) {
            window.setTimeout(callback, 1000 / 60)
        };
        var canvas = document.createElement('canvas')
            , ctx = canvas.getContext('2d');
        var springs = []
            , MAX_SPRINGS = 250;
        canvas.width = window.innerWidth + 10;
        canvas.height = 350;
        document.body.appendChild(canvas);
        ctx.fillStyle = '#247b95';
        for (var i = 0; i < MAX_SPRINGS; i++) {
            springs[i] = new Spring();
        }

        function updateSprings(spread) {
            var i;
            for (i = 0; i < MAX_SPRINGS; i++) {
                springs[i].update(0.02, 0.1);
            }
            var leftDeltas = []
                , rightDeltas = [];
            for (var t = 0; t < 8; t++) {
                for (i = 0; i < MAX_SPRINGS; i++) {
                    if (i > 0) {
                        leftDeltas[i] = spread * (springs[i].p - springs[i - 1].p);
                        springs[i - 1].v += leftDeltas[i];
                    }
                    if (i < MAX_SPRINGS - 1) {
                        rightDeltas[i] = spread * (springs[i].p - springs[i + 1].p);
                        springs[i + 1].v += rightDeltas[i];
                    }
                }
                for (i = 0; i < MAX_SPRINGS; i++) {
                    if (i > 0) springs[i - 1].p += leftDeltas[i];
                    if (i < MAX_SPRINGS - 1) springs[i + 1].p += rightDeltas[i];
                }
            }
        }

        function Spring() {
            this.p = 0;
            this.v = 0;
            this.update = function (damp, tens) {
                this.v += (-tens * this.p - damp * this.v);
                this.p += this.v;
            }
        }

        function renderWaves() {
            var i;
            ctx.beginPath();
            ctx.moveTo(0, canvas.height);
            for (i = 0; i < MAX_SPRINGS; i++) {
                ctx.lineTo(i * (canvas.width / MAX_SPRINGS), (canvas.height / 2) + springs[i].p);
            }
            ctx.lineTo(canvas.width, canvas.height);
            ctx.fill();
        }

        function Octopus() {
            this.sections = [];
            this.nSec = 20;
            this.len = 250;
            this.loop = 0;
            this.init = function () {
                for (var i = 0; i < this.nSec; i++) {
                    this.sections[i] = 0;
                }
            };
            this.render = function () {
                ctx.save();
                ctx.translate(canvas.width / 2, (canvas.height / 2) + 50);
                ctx.scale(1.4, 1);
                ctx.save();
                ctx.fillStyle = "#7db";
                var step = this.len / this.nSec;
                for (var i = 0; i < this.nSec; i++) {
                    ctx.rotate(this.sections[i]);
                    if (i % 3 == 0) {
                        ctx.beginPath();
                        ctx.arc(-(this.nSec - i), -step * i, 10 - (i / 3), 0, Math.PI * 2, true);
                        ctx.fill();
                    }
                }
                ctx.restore();
                ctx.save();
                ctx.fillStyle = "#4f8079";
                ctx.beginPath();
                var step = this.len / this.nSec;
                for (var i = 0; i < this.nSec; i++) {
                    ctx.rotate(this.sections[i]);
                    ctx.lineTo(-(this.nSec - i), -step * i);
                }
                for (var i = this.nSec - 2; i >= 0; i--) {
                    ctx.rotate(-this.sections[i]);
                    ctx.lineTo((this.nSec - i), -step * i);
                }
                ctx.fill();
                ctx.restore();
                ctx.restore();
            };
            this.animate = function () {
                var i;
                for (i = 0; i < this.nSec; i++) {
                    this.sections[i] = Math.sin((this.loop - (i * (50 / this.nSec))) / 20) / this.nSec;
                }
                this.loop = (this.loop + 1) % (Math.PI * 360);
            };
            this.init();
        }
        var oc = new Octopus();

        function tick() {
            if (Math.random() > 0.95) springs[Math.floor(Math.random() * MAX_SPRINGS)].p = 150;
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            oc.animate();
            oc.render();
            updateSprings(0.1);
            renderWaves();
            _requestAnimationFrame(tick);
        }
        tick();
    </script>
</body>

</html>
